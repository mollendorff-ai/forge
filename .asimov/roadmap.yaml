# Forge Roadmap
# For version history, see CHANGELOG.md
# Last updated: 2025-12-08 (v5.12.0 source closure added)
#
# ═══════════════════════════════════════════════════════════════════════════════
# CODING STANDARDS
# ═══════════════════════════════════════════════════════════════════════════════
# - Unit tests: Keep with code (Rust way: #[cfg(test)] mod tests in same file)
# - Test coverage: 100% mandatory for all functional code
# - No file > 1,500 lines (split into submodules when exceeded)
# - Zero warnings policy
# - ADR-006: Use #[cfg(not(coverage))] for untestable code paths
# ═══════════════════════════════════════════════════════════════════════════════

metadata:
  current_version: "5.11.0"
  last_updated: "2025-12-08"
  philosophy: "Zero tokens. Zero emissions. $40K-$132K/year saved."

# Current Release
current:
  version: "5.11.0"
  status: released
  date: "2025-12-08"
  summary: "Business-Oriented README + R&D License Clarity"
  highlights:
    - "README rewritten for enterprise audience (Big 4, fintech, FP&A)"
    - "Pain points, ROI, audit trail - speaks finance, not code"
    - "License: 'You can see what's possible. You can't have it. Yet.'"
    - "--help updated with precise stats"
  stats:
    tests: 1709
    warnings: 0
    functions_evaluator: 81
    functions_translator: 147
    e2e_formulas_validated: 60
    coverage: "89.23%"

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT MILESTONES
# ═══════════════════════════════════════════════════════════════════════════════

next:

  # ─────────────────────────────────────────────────────────────────────────────
  # HIGHLY-CRITICAL: Close the Source - Self-Hosted Git + Public Demo
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.12.0"
    summary: "Close Source - Gitolite Migration + GitHub Demo Repo"
    priority: HIGHLY-CRITICAL
    status: in_progress
    estimated_effort: "1 session"
    notes: |
      Forge is a $100K-$300K/year tool based on competitive analysis.
      No direct competitor exists. Source code must be protected.

      ARCHITECTURE DECISION (ADR-011):
      - Source code → gitolite (git@crypto1.ca:royalbit/forge)
      - Binary downloads → royalbit.ca/forge/
      - Public demo → GitHub forge-demo (E2E tests + examples only)

      GitHub ToS research revealed murky AI training policies for free tier.
      Self-hosted gitolite = ZERO AI training risk, FULL control.

      Git history preserved: 330+ commits = ASIMOV velocity proof (2.75x Linus)

    deliverables:
      # ═══════════════════════════════════════════════════════════════════════════
      # PHASE 1: GITOLITE MIGRATION (DONE)
      # ═══════════════════════════════════════════════════════════════════════════

      - task: "Add royalbit/forge to gitolite.conf"
        status: done
        notes: "Pushed to gitolite-admin, repo initialized"

      - task: "Migrate origin to gitolite"
        status: done
        notes: |
          git remote rename origin github
          git remote add origin git@crypto1.ca:royalbit/forge.git
          git push -u origin main
          GitHub repo set to PRIVATE

      - task: "Create hosting architecture doc"
        status: done
        notes: "docs/HOSTING_ARCHITECTURE.md"

      - task: "Create ADR-011 for source closure decision"
        status: done
        notes: "docs/architecture/ADR-011-SOURCE-CODE-CLOSURE.md"

      - task: "Create /forge/ landing page on royalbit.ca"
        status: done
        notes: |
          - html/forge/index.html created
          - R&D narrative maintained
          - GitHub Issues for contact (NO EMAIL = NO SPAM)
          - Stats: 28k LOC, 1,709 tests, 89% coverage, 147 functions

      # ═══════════════════════════════════════════════════════════════════════════
      # PHASE 2: FRESH GITHUB REPO (NEXT)
      # ═══════════════════════════════════════════════════════════════════════════

      - task: "Create FRESH royalbit/forge repo on GitHub"
        status: pending
        priority: NEXT
        notes: |
          NOT forge-demo, keep the original name for SEO/discoverability!

          DELETE current private repo, create FRESH with:
          - NO git history (no source code traces)
          - NO source code
          - FRESH start

          This becomes the PUBLIC face of Forge.

      - task: "Add E2E validation suite to GitHub repo"
        status: pending
        notes: |
          Contents:
          - tests/e2e/ directory with Gnumeric/LibreOffice validation
          - Example YAML models (showcase capabilities)
          - Validation scripts that download binary from royalbit.ca
          - CI workflow that runs E2E tests

          PROVES: Forge formulas match Excel/Gnumeric/LibreOffice
          NO SOURCE CODE - just tests + examples

      - task: "Create README for GitHub repo (enterprise pitch)"
        status: pending
        notes: |
          - Problem statement (AI hallucinates, Excel is binary)
          - Solution (YAML + formula evaluation)
          - Stats (28k LOC, 1,709 tests, 147 functions)
          - E2E validation proof
          - Download link → royalbit.ca/forge/
          - Contact → GitHub Issues (partnerships, licensing)

          R&D NARRATIVE - avoid CGI conflict of interest

      - task: "Add ultra-restrictive LICENSE"
        status: pending
        notes: |
          Evaluation-only license:
          - View and test ONLY
          - No commercial use
          - No modification
          - No redistribution
          - Contact for licensing

      - task: "Configure GitHub Issues for contact"
        status: pending
        notes: |
          Issue templates:
          - Partnership Inquiry
          - Licensing Inquiry
          - Bug Report (E2E tests only)
          - Feature Request

          NO EMAIL = NO SPAM. All inquiries through GitHub.

      # ═══════════════════════════════════════════════════════════════════════════
      # PHASE 3: BINARY DISTRIBUTION
      # ═══════════════════════════════════════════════════════════════════════════

      - task: "Build release binaries"
        status: pending
        notes: |
          Cross-compile for:
          - Linux x86_64
          - macOS arm64 (Apple Silicon)
          - macOS x86_64 (Intel)
          - Windows x86_64

          Strip symbols, optimize for size

      - task: "Add binaries to royalbit.ca/forge/"
        status: pending
        notes: |
          Files:
          - forge-linux-x86_64
          - forge-macos-arm64
          - forge-macos-x86_64
          - forge-windows.exe
          - checksums.sha256
          - install.sh (curl | sh installer)

          Deploy via kveldulf Docker Swarm

      # ═══════════════════════════════════════════════════════════════════════════
      # PHASE 4: ESCAPE VELOCITY
      # ═══════════════════════════════════════════════════════════════════════════

      - task: "Enterprise licensing structure"
        status: pending
        notes: |
          Tiers based on competitive analysis:
          - Startup: $3K-$12K/yr (vs Causal $3K)
          - Mid-market: $24K-$60K/yr (vs Datarails $24K-$60K)
          - Enterprise: $50K-$150K/yr (vs Anaplan $50K-$200K)

          GOAL: Escape velocity from CGI.
          20+ years of underpaid labour ends HERE.

    success_criteria:
      - "Source code on gitolite ONLY (no GitHub traces)"
      - "Git history preserved locally (330+ commits = ASIMOV proof)"
      - "FRESH GitHub repo (E2E tests, no source)"
      - "GitHub Issues for contact (no spam)"
      - "Binaries on royalbit.ca/forge/"
      - "E2E tests prove formula accuracy"
      - "Enterprise clients can evaluate and reach out"

  # ─────────────────────────────────────────────────────────────────────────────
  # CRITICAL: Documentation Polish - Make It Irresistible
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.13.0"
    summary: "Documentation Polish - Enterprise-Grade, Irresistible"
    priority: CRITICAL
    status: pending
    estimated_effort: "1-2 sessions"
    notes: |
      Review and polish EVERY piece of documentation.
      Target: Enterprise buyers at top consulting/fintech/finance firms.
      Goal: Make them WANT this product.

    deliverables:
      - task: "Review ALL .md files in repo root"
        status: pending
        notes: "README, CHANGELOG, CONTRIBUTING - professional tone, precise stats"

      - task: "Review ALL docs/*.md files"
        status: pending
        notes: "Architecture docs, design docs, API docs - no outdated info"

      - task: "Review ALL ADRs (Architecture Decision Records)"
        status: pending
        notes: "Complete, professional, well-reasoned decisions"

      - task: "Review ALL specs and schemas"
        status: pending
        notes: "JSON schema, YAML format spec, function reference"

      - task: "Review .asimov/ protocol files"
        status: pending
        notes: "roadmap.yaml, project.yaml - consistent, clean"

      - task: "Add SECURITY.md"
        status: pending
        notes: "Local-first, no telemetry, no cloud - enterprise compliance"

      - task: "Remove any developer-centric language"
        status: pending
        notes: "Replace with business value language"

    success_criteria:
      - "Every .md file reads professionally"
      - "No outdated stats, no approximations"
      - "Clear R&D status, clear value proposition"
      - "Enterprise buyers see quality and want it"

  # ─────────────────────────────────────────────────────────────────────────────
  # CRITICAL: Git History Cleanup - Remove Former MIT License
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.14.0"
    summary: "Git History Analysis - MIT License Removal Options"
    priority: CRITICAL
    status: pending
    estimated_effort: "1 session (analysis) + decision"
    notes: |
      The repo previously had MIT license. Need to analyze options
      for cleaning this from git history to ensure proprietary status.
      This is a LEGAL/BUSINESS decision, not just technical.

    deliverables:
      - task: "Analyze git history for MIT license artifacts"
        status: pending
        notes: "Find all commits with MIT license, assess exposure"

      - task: "Document Option A: git filter-branch / BFG Repo Cleaner"
        status: pending
        notes: |
          Pros: Complete removal from history
          Cons: Rewrites all commit SHAs, breaks forks/clones

      - task: "Document Option B: Fresh repo with squashed history"
        status: pending
        notes: |
          Pros: Clean slate, simple
          Cons: Loses detailed commit history

      - task: "Document Option C: Keep history, add legal notice"
        status: pending
        notes: |
          Pros: Preserves history, simplest
          Cons: MIT commits still visible (but superseded by new license)

      - task: "Document Option D: Archive current repo, new repo"
        status: pending
        notes: |
          Pros: Clean separation
          Cons: Loses GitHub stars/issues/links

      - task: "Legal implications summary"
        status: pending
        notes: "What does MIT in history mean legally? Consult if needed."

      - task: "Recommendation with pros/cons"
        status: pending

    success_criteria:
      - "All options clearly documented"
      - "Legal implications understood"
      - "Clear recommendation for owner decision"

  # ─────────────────────────────────────────────────────────────────────────────
  # NORMAL: Complete Function Parity (81 -> 147)
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.15.0"
    summary: "Complete Function Parity - ALL 147 Functions Working"
    priority: NORMAL
    status: pending
    estimated_effort: "2-3 sessions"
    notes: |
      GAP: 147 functions in translator, only 81 in evaluator.
      66 functions export to Excel but can't be calculated by Forge.

    deliverables:
      - task: "Audit: List all 66 missing functions"
        status: pending

      - task: "Implement Trigonometric functions"
        status: pending
        notes: "SIN, COS, TAN, ASIN, ACOS, ATAN, SINH, COSH, TANH, RADIANS, DEGREES"

      - task: "Implement Information functions"
        status: pending
        notes: "ISEVEN, ISODD, ISBLANK, ISERROR, ISNA, ISNUMBER, ISTEXT, etc."

      - task: "Implement remaining Text, Date, Lookup, Array, Stats functions"
        status: pending

      - task: "E2E validate ALL 147 functions"
        status: pending

    success_criteria:
      - "Evaluator = Translator = 147 functions"
      - "All functions E2E validated"

  # ─────────────────────────────────────────────────────────────────────────────
  # 100% CODE COVERAGE MILESTONES
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.16.0"
    summary: "100% Coverage - Dead Code & Quick Wins"
    priority: NORMAL
    status: pending
    estimated_effort: "1 session"

    deliverables:
      - task: "Remove dead code: core/array_calculator/dates.rs"
        status: pending
        notes: "Legacy dates.rs is dead code (replaced by evaluator/dates.rs)"

      - task: "Quick wins: 15 files with <15 missed lines each"
        status: pending
        notes: "types.rs, error.rs, logical.rs, text.rs, array.rs, server.rs, etc."

  - version: "5.17.0"
    summary: "100% Coverage - Medium & Complex Files"
    priority: NORMAL
    status: pending
    estimated_effort: "2-3 sessions"
    notes: "May need cfg(not(coverage)) for OS-specific/server paths"

    deliverables:
      - task: "Cover 13 medium files (15-50 missed lines)"
        status: pending

      - task: "Cover 5 complex files (50+ missed lines)"
        status: pending

    success_criteria:
      - "100% test coverage for all functional code"
      - "Untestable code properly excluded via #[cfg(not(coverage))]"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "Complete E2E validation for remaining functions (81 total)"
  - "GitHub Actions workflow for E2E tests (requires gnumeric in CI)"
  - "OpenAPI spec + Swagger UI for API server"
  - "Forge vs Copilot benchmark suite"
  - "Excel compatibility matrix documentation"

# ═══════════════════════════════════════════════════════════════════════════════
# For version history, see CHANGELOG.md
# ═══════════════════════════════════════════════════════════════════════════════
