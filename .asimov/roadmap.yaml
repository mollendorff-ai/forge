# Forge Roadmap
# For version history, see CHANGELOG.md
# Last updated: 2025-12-08
#
# ═══════════════════════════════════════════════════════════════════════════════
# CODING STANDARDS
# ═══════════════════════════════════════════════════════════════════════════════
# - Unit tests: Keep with code (Rust way: #[cfg(test)] mod tests in same file)
# - Test coverage: 100% mandatory for all functional code
# - No file > 1,500 lines (split into submodules when exceeded)
# - Zero warnings policy
# - ADR-006: Use #[cfg(not(coverage))] for untestable code paths
# ═══════════════════════════════════════════════════════════════════════════════

metadata:
  current_version: "5.14.0"
  last_updated: "2025-12-08"
  philosophy: "Zero tokens. Zero emissions. $40K-$132K/year saved."

current:
  version: "5.14.0"
  status: released
  date: "2025-12-08"
  summary: "Feature Flags - Demo/Enterprise Binary Split"
  stats:
    tests: 1753
    warnings: 0
    functions_demo: 80
    functions_enterprise: 149
    coverage: "~90%"

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT MILESTONES
# ═══════════════════════════════════════════════════════════════════════════════

next:

  # ─────────────────────────────────────────────────────────────────────────────
  # 5.14.0: Demo Binary (Option A: Feature Flags)
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.14.0"
    summary: "Demo Binary - Feature Flags (Option A)"
    priority: CRITICAL
    status: released
    notes: |
      DECISION: Option A - Feature Flags

      cargo build              → demo (~40 functions, v1.0.0 only)
      cargo build --features full → enterprise (149 functions, all schemas)

      Gate with #[cfg(feature = "full")]:
      - Enterprise functions (VARIANCE, BREAKEVEN, SCENARIO, LET, LAMBDA, etc.)
      - v4.0.0/v5.0.0 schema support
      - API server

      Demo keeps (~40 functions):
      - Math: SUM, AVERAGE, MIN, MAX, COUNT, ROUND, ABS, SQRT, POWER, MOD
      - Financial: PMT, PV, FV, NPV, IRR, NPER, RATE
      - Logical: IF, AND, OR, NOT, IFERROR
      - Text: CONCAT, LEFT, RIGHT, MID, LEN, UPPER, LOWER, TRIM
      - Date: TODAY, DATE, YEAR, MONTH, DAY, DATEDIF
      - Lookup: INDEX, MATCH, CHOOSE

    deliverables:
      - task: "Write ADR-012-FEATURE-FLAGS.md"
        status: pending
      - task: "Commit and push ADR"
        status: pending
      - task: "Add 'full' feature to Cargo.toml"
        status: pending
      - task: "Gate enterprise functions with #[cfg(feature = \"full\")]"
        status: pending
      - task: "Gate v4/v5 schema support"
        status: pending
      - task: "Gate API server"
        status: pending
      - task: "Test: cargo build (demo) and cargo build --features full (enterprise)"
        status: pending
      - task: "Commit and push feature flags implementation"
        status: pending
      - task: "Update source README.md with build instructions"
        status: pending
      - task: "Commit and push README"
        status: pending
      - task: "Update forge-gh docs/FUNCTIONS.md (demo function list)"
        status: pending
      - task: "Commit and push forge-gh"
        status: pending
      - task: "Cross-compile demo binaries (linux, macos, windows)"
        status: pending
      - task: "Host binaries on royalbit.ca/forge/"
        status: pending
      - task: "Test demo binary has only ~40 functions"
        status: pending
      - task: "Final commit: release v5.14.0"
        status: pending

  # ─────────────────────────────────────────────────────────────────────────────
  # 5.15.0: Documentation Polish
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.15.0"
    summary: "Documentation Polish"
    priority: NORMAL
    status: pending

  # ─────────────────────────────────────────────────────────────────────────────
  # 5.16.0: 100% Coverage
  # ─────────────────────────────────────────────────────────────────────────────

  - version: "5.16.0"
    summary: "100% Coverage - Dead Code Removal"
    priority: NORMAL
    status: pending

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "Enterprise licensing (when ready to leave CGI)"
  - "Git history cleanup - MIT license removal"
  - "MCP server integration"
