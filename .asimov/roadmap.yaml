# Forge Roadmap
# Version: Cargo.toml | History: CHANGELOG.md | Config: project.yaml

# ═══════════════════════════════════════════════════════════════════════════════
# COMPLETED
# ═══════════════════════════════════════════════════════════════════════════════

completed:
  - version: "5.15.0"
    date: "2025-12-08"
    summary: "Binary Split - forge-demo (36 functions) vs forge (enterprise)"

  - version: "5.16.0"
    date: "2025-12-08"
    summary: "GitHub Fresh Start - PUBLIC repo, GitHub Releases, website cleanup"

  - version: "5.17.0"
    date: "2025-12-09"
    summary: "Function Registry (ADR-013) + E2E test coverage"

  - version: "5.18.0"
    date: "2025-12-09"
    summary: "Documentation Polish - Enterprise Due Diligence Ready"

  - version: "5.19.0"
    date: "2025-12-09"
    summary: "Demo Function Expansion - 49 functions (add 7 math + 6 trig)"

  - version: "5.19.1"
    date: "2025-12-09"
    summary: "v1.0.0 Schema Bug Fix - String literals with letters"

  - version: "6.0.0"
    date: "2025-12-09"
    summary: "Comprehensive Function Testing & Validation (PARTIAL)"
    note: "Started category testing - 72/159 functions covered (45%)"
    stats:
      unit_tests: 1175
      e2e_tests: 38
      functions_covered: 72
      functions_total: 159
      coverage_percent: 45

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT - CRITICAL: 100% E2E Coverage by Category
# Each version = one function category with FULL test coverage
# ═══════════════════════════════════════════════════════════════════════════════

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ FP&A ACCURACY MANDATE                                                       │
# │                                                                             │
# │ This is a FINANCIAL PLANNING & ANALYSIS tool.                              │
# │ ACCURACY IS MANDATORY - NOT OPTIONAL.                                       │
# │                                                                             │
# │ Requirements for EVERY function:                                            │
# │   1. 100% functional coverage - EVERY code path tested                     │
# │   2. 100% E2E validation against Gnumeric/LibreOffice                      │
# │   3. ALL edge cases: zero, negative, overflow, error, boundary             │
# │   4. Financial calculations MUST match Excel exactly                        │
# │                                                                             │
# │ NO EXCEPTIONS. NO SHORTCUTS. NO "GOOD ENOUGH".                             │
# └─────────────────────────────────────────────────────────────────────────────┘

next:
  # ─────────────────────────────────────────────────────────────────────────────
  # MATH FUNCTIONS (20 functions) - Largest category
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.1.0"
    summary: "Math Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Math
    function_count: 20
    functions:
      - ABS
      - CEILING
      - DEGREES
      - E
      - EXP
      - FLOOR
      - INT
      - LN
      - LOG10
      - MOD
      - PI
      - POW
      - POWER
      - RADIANS
      - ROUND
      - ROUNDDOWN
      - ROUNDUP
      - SIGN
      - SQRT
      - TRUNC

    edge_cases:
      - "Zero: ABS(0), SQRT(0), MOD(0, n), LOG10(1)"
      - "Negative: ABS(-x), SQRT(-1)=error, MOD(-10, 3)"
      - "Large numbers: EXP(709), POWER(2, 1000)"
      - "Small numbers: LN(0.0001), EXP(-100)"
      - "Infinity: EXP(1000)=INF, LN(0)=error"
      - "Precision: ROUND(2.5, 0) banker's rounding"
      - "Negative rounding: ROUNDUP(-3.2, 0), FLOOR(-3.7, 1)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_math_complete.yaml - all 20 functions"
        - "tests/e2e_math_edge_cases.yaml - edge cases"
      e2e_gnumeric:
        - "Export to XLSX, recalculate with ssconvert --recalc"
        - "Compare CSV output with expected values"
        - "Tolerance: 0.0001 for floating point"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/math_complete.rs"
      - "E2E YAML: tests/e2e_math_complete.yaml"
      - "E2E YAML: tests/e2e_math_edge_cases.yaml"
      - "Gnumeric validation in e2e_libreoffice_tests.rs"

  # ─────────────────────────────────────────────────────────────────────────────
  # DATE FUNCTIONS (21 functions) - Most functions
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.2.0"
    summary: "Date Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Date
    function_count: 21
    functions:
      - D
      - DATE
      - DATEDIF
      - DAY
      - DAYS
      - EDATE
      - EOMONTH
      - HOUR
      - M
      - MINUTE
      - MONTH
      - NETWORKDAYS
      - NOW
      - SECOND
      - TIME
      - TODAY
      - WEEKDAY
      - WORKDAY
      - Y
      - YEAR
      - YEARFRAC

    edge_cases:
      - "Leap years: DATE(2024, 2, 29), EOMONTH(DATE(2024, 1, 15), 1)"
      - "Month boundaries: EDATE(DATE(2024, 1, 31), 1)=Feb 29"
      - "Year boundaries: DATEDIF(DATE(2023, 12, 31), DATE(2024, 1, 1), 'D')"
      - "Negative days: DATE(2024, 1, -5)"
      - "Invalid dates: DATE(2024, 13, 1), DATE(2024, 2, 30)"
      - "Time precision: TIME(23, 59, 59), HOUR(0.9999)"
      - "NETWORKDAYS with holidays"
      - "YEARFRAC different bases (0, 1, 2, 3, 4)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_date_complete.yaml - all 21 functions"
        - "tests/e2e_date_edge_cases.yaml - leap years, boundaries"
      e2e_gnumeric:
        - "Validate date serial numbers match Excel/Gnumeric"
        - "Test DATE epoch (1900 vs 1904 system)"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/date_complete.rs"
      - "E2E YAML: tests/e2e_date_complete.yaml"
      - "E2E YAML: tests/e2e_date_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # TEXT FUNCTIONS (15 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.3.0"
    summary: "Text Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Text
    function_count: 15
    functions:
      - CONCAT
      - CONCATENATE
      - FIND
      - LEFT
      - LEN
      - LOWER
      - MID
      - REPLACE
      - RIGHT
      - SEARCH
      - SUBSTITUTE
      - TEXT
      - TRIM
      - UPPER
      - VALUE

    edge_cases:
      - "Empty strings: LEN(''), LEFT('', 5), TRIM('')"
      - "Unicode: LEN('日本語'), UPPER('café')"
      - "Not found: FIND('x', 'abc')=error, SEARCH('x', 'abc')=error"
      - "Negative positions: MID('abc', -1, 2)"
      - "Overflow: LEFT('abc', 100), MID('abc', 1, 100)"
      - "Case sensitivity: FIND vs SEARCH"
      - "Multiple substitutions: SUBSTITUTE('aaa', 'a', 'b', 2)"
      - "VALUE conversion: VALUE('123'), VALUE('$1,234.56')"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_text_complete.yaml - all 15 functions"
        - "tests/e2e_text_edge_cases.yaml - unicode, empty, errors"
      e2e_gnumeric:
        - "Test string escaping in XLSX"
        - "Validate TEXT format codes"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/text_complete.rs"
      - "E2E YAML: tests/e2e_text_complete.yaml"
      - "E2E YAML: tests/e2e_text_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # AGGREGATION FUNCTIONS (14 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.4.0"
    summary: "Aggregation Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Aggregation
    function_count: 14
    functions:
      - AVERAGE
      - AVG
      - COUNT
      - COUNTA
      - COUNTUNIQUE
      - LARGE
      - MAX
      - MAXIFS
      - MIN
      - MINIFS
      - PRODUCT
      - RANK.EQ
      - SMALL
      - SUM

    edge_cases:
      - "Empty arrays: SUM(), AVERAGE(), COUNT()"
      - "Single value: AVERAGE(5), LARGE(5, 1)"
      - "Mixed types: COUNT(1, 'a', 3), COUNTA(1, 'a', '')"
      - "Negative values: MIN(-5, -3, -8)"
      - "Ties: RANK.EQ(5, [5, 5, 3, 1])"
      - "Out of range: LARGE([1,2,3], 10)=error"
      - "MAXIFS/MINIFS with no matches"
      - "PRODUCT with zero: PRODUCT(1, 0, 3)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_aggregation_complete.yaml - all 14 functions"
        - "tests/e2e_aggregation_edge_cases.yaml"
      e2e_gnumeric:
        - "Test with table column references"
        - "Validate array aggregation behavior"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/aggregation_complete.rs"
      - "E2E YAML: tests/e2e_aggregation_complete.yaml"
      - "E2E YAML: tests/e2e_aggregation_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # LOOKUP FUNCTIONS (13 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.5.0"
    summary: "Lookup Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Lookup
    function_count: 13
    functions:
      - ADDRESS
      - CHOOSE
      - COLUMN
      - COLUMNS
      - HLOOKUP
      - INDEX
      - INDIRECT
      - MATCH
      - OFFSET
      - ROW
      - ROWS
      - VLOOKUP
      - XLOOKUP

    edge_cases:
      - "Not found: VLOOKUP(999, ...), MATCH(999, ...)"
      - "Exact vs approximate: VLOOKUP(..., FALSE) vs TRUE"
      - "XLOOKUP if_not_found parameter"
      - "MATCH match_type: 0 (exact), 1 (less than), -1 (greater than)"
      - "INDEX out of bounds"
      - "INDIRECT with invalid reference"
      - "OFFSET negative rows/cols"
      - "CHOOSE index out of range"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_lookup_complete.yaml - all 13 functions"
        - "tests/e2e_lookup_edge_cases.yaml"
      e2e_gnumeric:
        - "Test A1 notation translation"
        - "Validate VLOOKUP/HLOOKUP exact match"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/lookup_complete.rs"
      - "E2E YAML: tests/e2e_lookup_complete.yaml"
      - "E2E YAML: tests/e2e_lookup_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # INFORMATION FUNCTIONS (13 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.6.0"
    summary: "Information Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Information
    function_count: 13
    functions:
      - ISBLANK
      - ISERROR
      - ISEVEN
      - ISFORMULA
      - ISLOGICAL
      - ISNA
      - ISNUMBER
      - ISODD
      - ISREF
      - ISTEXT
      - N
      - NA
      - TYPE

    edge_cases:
      - "ISBLANK with empty string vs null"
      - "ISERROR with different error types (#DIV/0!, #VALUE!, #REF!)"
      - "ISEVEN/ISODD with decimals: ISEVEN(2.5)"
      - "TYPE return codes: 1=number, 2=text, 4=logical, 16=error"
      - "N conversion: N(TRUE)=1, N('text')=0"
      - "NA() generates #N/A error"
      - "ISFORMULA detection"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_information_complete.yaml - all 13 functions"
        - "tests/e2e_information_edge_cases.yaml"
      e2e_gnumeric:
        - "Validate TYPE return values"
        - "Test error type detection"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/information_complete.rs"
      - "E2E YAML: tests/e2e_information_complete.yaml"
      - "E2E YAML: tests/e2e_information_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # FINANCIAL FUNCTIONS (13 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.7.0"
    summary: "Financial Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Financial
    function_count: 13
    functions:
      - DB
      - DDB
      - FV
      - IRR
      - MIRR
      - NPER
      - NPV
      - PMT
      - PV
      - RATE
      - SLN
      - XIRR
      - XNPV

    edge_cases:
      - "Zero interest rate: PMT(0, 12, 1000)"
      - "Negative cash flows: NPV with mixed signs"
      - "IRR no solution / multiple solutions"
      - "XIRR/XNPV date validation"
      - "DDB period > life"
      - "RATE convergence failure"
      - "NPER with zero payment"
      - "Depreciation: DB/DDB/SLN edge cases"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_financial_complete.yaml - all 13 functions"
        - "tests/e2e_financial_edge_cases.yaml"
      e2e_gnumeric:
        - "Validate against Excel financial functions"
        - "Test sign conventions (payments negative)"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/financial_complete.rs"
      - "E2E YAML: tests/e2e_financial_complete.yaml"
      - "E2E YAML: tests/e2e_financial_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # TRIGONOMETRIC FUNCTIONS (9 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.8.0"
    summary: "Trigonometric Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Trigonometric
    function_count: 9
    functions:
      - ACOS
      - ASIN
      - ATAN
      - COS
      - COSH
      - SIN
      - SINH
      - TAN
      - TANH

    edge_cases:
      - "Domain errors: ASIN(2)=error, ACOS(-2)=error"
      - "Special values: SIN(0), COS(0), TAN(0)"
      - "PI boundaries: SIN(PI()), COS(PI()), TAN(PI()/2)"
      - "Hyperbolic overflow: SINH(1000), COSH(1000)"
      - "Precision: SIN(PI()) should be ~0, not exactly 0"
      - "Radians vs degrees (functions use radians)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_trig_complete.yaml - all 9 functions"
        - "tests/e2e_trig_edge_cases.yaml"
      e2e_gnumeric:
        - "Validate precision against Gnumeric"
        - "Test domain error handling"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/trig_complete.rs"
      - "E2E YAML: tests/e2e_trig_complete.yaml"
      - "E2E YAML: tests/e2e_trig_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # LOGICAL FUNCTIONS (9 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.9.0"
    summary: "Logical Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Logical
    function_count: 9
    functions:
      - AND
      - FALSE
      - IF
      - IFERROR
      - IFNA
      - NOT
      - OR
      - TRUE
      - XOR

    edge_cases:
      - "Empty AND/OR: AND(), OR()"
      - "Type coercion: AND(1, 0), OR('', 1)"
      - "Nested IF: IF(IF(...))"
      - "IFERROR vs IFNA: IFERROR catches all, IFNA only #N/A"
      - "XOR with multiple args: XOR(TRUE, TRUE, TRUE)"
      - "Short-circuit evaluation"
      - "Non-boolean inputs: IF(5, 'yes', 'no')"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_logical_complete.yaml - all 9 functions"
        - "tests/e2e_logical_edge_cases.yaml"
      e2e_gnumeric:
        - "Validate boolean to number conversion"
        - "Test error propagation"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/logical_complete.rs"
      - "E2E YAML: tests/e2e_logical_complete.yaml"
      - "E2E YAML: tests/e2e_logical_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # STATISTICAL FUNCTIONS (8 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.10.0"
    summary: "Statistical Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Statistical
    function_count: 8
    functions:
      - CORREL
      - MEDIAN
      - PERCENTILE
      - QUARTILE
      - STDEV.S
      - STDEVP
      - VAR.S
      - VARP

    edge_cases:
      - "Single value: STDEV(5)=error (need 2+ values)"
      - "PERCENTILE boundaries: PERCENTILE(arr, 0), PERCENTILE(arr, 1)"
      - "QUARTILE values: 0=min, 1=Q1, 2=median, 3=Q3, 4=max"
      - "CORREL perfect correlation: +1, -1"
      - "CORREL no correlation: arrays of same value"
      - "Sample vs Population: STDEV.S vs STDEVP"
      - "Even vs odd count for MEDIAN"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_statistical_complete.yaml - all 8 functions"
        - "tests/e2e_statistical_edge_cases.yaml"
      e2e_gnumeric:
        - "Validate statistical formulas"
        - "Test sample vs population variance"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/statistical_complete.rs"
      - "E2E YAML: tests/e2e_statistical_complete.yaml"
      - "E2E YAML: tests/e2e_statistical_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # CONDITIONAL FUNCTIONS (8 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.11.0"
    summary: "Conditional Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Conditional
    function_count: 8
    functions:
      - AVERAGEIF
      - AVERAGEIFS
      - COUNTIF
      - COUNTIFS
      - IFS
      - SUMIF
      - SUMIFS
      - SWITCH

    edge_cases:
      - "No matches: SUMIF with criteria matching nothing"
      - "Wildcard criteria: COUNTIF(range, '*text*')"
      - "Numeric criteria: SUMIF(range, '>100')"
      - "Multiple criteria: SUMIFS with conflicting conditions"
      - "IFS no true condition"
      - "SWITCH no match without default"
      - "Empty range: COUNTIF(empty, criteria)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_conditional_complete.yaml - all 8 functions"
        - "tests/e2e_conditional_edge_cases.yaml"
      e2e_gnumeric:
        - "Test criteria syntax"
        - "Validate multi-criteria functions"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/conditional_complete.rs"
      - "E2E YAML: tests/e2e_conditional_complete.yaml"
      - "E2E YAML: tests/e2e_conditional_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # FORGE NATIVE FUNCTIONS (8 functions) - Manual validation
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.12.0"
    summary: "Forge Native Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: ForgeNative
    function_count: 8
    functions:
      - BREAKEVEN_REVENUE
      - BREAKEVEN_UNITS
      - MD
      - VARIANCE
      - VARIANCE_PCT
      - VARIANCE_STATUS
      - YD
      - YM

    note: "These functions don't exist in Excel/Gnumeric - manual validation required"

    edge_cases:
      - "BREAKEVEN with zero margin"
      - "VARIANCE with same actual/budget"
      - "VARIANCE_PCT division by zero (budget=0)"
      - "VARIANCE_STATUS thresholds"
      - "Date diff functions: MD, YD, YM edge cases"
      - "Negative variance scenarios"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_forge_native_complete.yaml - all 8 functions"
        - "tests/e2e_forge_native_edge_cases.yaml"
      manual_validation:
        - "Document expected calculations in test comments"
        - "Cross-reference with FP&A formulas"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/forge_native_complete.rs"
      - "E2E YAML: tests/e2e_forge_native_complete.yaml"
      - "E2E YAML: tests/e2e_forge_native_edge_cases.yaml"
      - "docs/FORGE_NATIVE_FUNCTIONS.md with calculation specs"

  # ─────────────────────────────────────────────────────────────────────────────
  # ARRAY FUNCTIONS (5 functions) - v5.0.0 schema required
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.13.0"
    summary: "Array Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Array
    function_count: 5
    functions:
      - FILTER
      - RANDARRAY
      - SEQUENCE
      - SORT
      - UNIQUE

    note: "These functions require v5.0.0 schema with table/array context"

    edge_cases:
      - "FILTER no matches: empty result"
      - "SORT empty array"
      - "UNIQUE all same values"
      - "SEQUENCE with step=0"
      - "RANDARRAY reproducibility (can't test exact values)"
      - "Large arrays: SEQUENCE(1000)"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_array_complete.yaml - all 5 functions (v5.0.0 schema)"
        - "tests/e2e_array_edge_cases.yaml"
      e2e_gnumeric:
        - "Test dynamic array spill behavior"
        - "Validate SORT order"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/array_complete.rs"
      - "E2E YAML: tests/e2e_array_complete.yaml"
      - "E2E YAML: tests/e2e_array_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # ADVANCED FUNCTIONS (3 functions)
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.14.0"
    summary: "Advanced Functions - 100% E2E Coverage"
    priority: CRITICAL
    status: pending
    category: Advanced
    function_count: 3
    functions:
      - LAMBDA
      - LET
      - SCENARIO

    edge_cases:
      - "LAMBDA recursion"
      - "LET variable shadowing"
      - "LET with complex expressions"
      - "SCENARIO switching"
      - "Nested LAMBDA/LET"

    tests_required:
      unit_tests:
        - "100% functional coverage - EVERY code path tested"
        - "100% coverage - all code paths, all edge cases"
      e2e_yaml:
        - "tests/e2e_advanced_complete.yaml - all 3 functions"
        - "tests/e2e_advanced_edge_cases.yaml"
      e2e_gnumeric:
        - "LAMBDA/LET may not be supported in Gnumeric"
        - "Manual validation for unsupported functions"

    deliverables:
      - "Unit tests: src/core/array_calculator/tests/advanced_complete.rs"
      - "E2E YAML: tests/e2e_advanced_complete.yaml"
      - "E2E YAML: tests/e2e_advanced_edge_cases.yaml"

  # ─────────────────────────────────────────────────────────────────────────────
  # IMPORT/EXPORT ROUNDTRIP - Full validation
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "6.15.0"
    summary: "Import/Export Roundtrip - Complete Validation"
    priority: CRITICAL
    status: pending

    tests_required:
      roundtrip_per_category:
        - "Math: YAML → XLSX → Gnumeric → CSV → compare"
        - "Date: Date serial number preservation"
        - "Text: String escaping, unicode"
        - "Financial: Sign conventions"
        - "All 14 categories with roundtrip tests"

      excel_import:
        - "Import .xlsx files with formulas"
        - "Import .xlsx files with values only"
        - "Preserve table structure"
        - "Handle merged cells"
        - "Handle named ranges"

      excel_export:
        - "Export with native Excel formulas (A1 notation)"
        - "Export with values only"
        - "Preserve formatting hints"
        - "Multi-sheet export"

    deliverables:
      - "tests/e2e_roundtrip_complete.rs - all categories"
      - "tests/e2e_import_excel.rs - import validation"
      - "tests/e2e_export_excel.rs - export validation"
      - "docs/IMPORT_EXPORT_SPEC.md"

  # ─────────────────────────────────────────────────────────────────────────────
  # FINAL RELEASE - 100% Coverage Achieved
  # ─────────────────────────────────────────────────────────────────────────────
  - version: "7.0.0"
    summary: "100% Function Coverage - Production Ready"
    priority: CRITICAL
    status: pending

    success_criteria:
      - "159/159 functions tested (100%)"
      - "All edge cases covered"
      - "Zero Gnumeric/LibreOffice mismatches"
      - "Import/export roundtrip passes"
      - "All tests pass: unit, integration, E2E"

    deliverables:
      - "CHANGELOG.md with full coverage report"
      - "README.md with coverage badge"
      - "docs/FUNCTION_COVERAGE.md matrix"
      - "GitHub release with binaries"

# ═══════════════════════════════════════════════════════════════════════════════
# SUMMARY
# ═══════════════════════════════════════════════════════════════════════════════

summary:
  total_functions: 159
  categories: 14
  versions_planned: 15

  category_breakdown:
    - "Math: 20 functions (v6.1.0)"
    - "Date: 21 functions (v6.2.0)"
    - "Text: 15 functions (v6.3.0)"
    - "Aggregation: 14 functions (v6.4.0)"
    - "Lookup: 13 functions (v6.5.0)"
    - "Information: 13 functions (v6.6.0)"
    - "Financial: 13 functions (v6.7.0)"
    - "Trigonometric: 9 functions (v6.8.0)"
    - "Logical: 9 functions (v6.9.0)"
    - "Statistical: 8 functions (v6.10.0)"
    - "Conditional: 8 functions (v6.11.0)"
    - "ForgeNative: 8 functions (v6.12.0)"
    - "Array: 5 functions (v6.13.0)"
    - "Advanced: 3 functions (v6.14.0)"
    - "Roundtrip: all categories (v6.15.0)"
    - "Final: 100% coverage (v7.0.0)"

  tests_per_category:
    unit_tests: "100% functional coverage - EVERY code path"
    e2e_gnumeric: "100% - EVERY function validated against Gnumeric/LibreOffice"
    edge_cases: "ALL edge cases - zero, negative, overflow, error, boundary"
    accuracy: "MANDATORY - FP&A tool, financial calculations must be exact"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "Find external FOSS tool to validate Forge-native functions"
  - "Enterprise licensing (when ready to leave CGI)"
  - "MCP server documentation"
  - "Performance benchmarks per function"
