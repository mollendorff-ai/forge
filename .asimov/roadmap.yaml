# Forge Roadmap
# Version: Cargo.toml | History: CHANGELOG.md | Config: project.yaml

# ═══════════════════════════════════════════════════════════════════════════════
# CURRENT - No active milestone
# ═══════════════════════════════════════════════════════════════════════════════

current:
  version: null
  status: idle
  summary: "No active milestone - awaiting next task"

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT - Candidate milestones (pick one to start)
# ═══════════════════════════════════════════════════════════════════════════════

next:
  - version: "9.8.0"
    priority: CRITICAL
    status: pending
    summary: "E2E Test Migration to forge-e2e (Parallel Agents)"
    rationale: |
      Forge at 636K LOC exceeds Claude's effective context window.
      forge-demo e2e tests caught BUG-010 to BUG-013 that were missed.
      Migrate all e2e/integration tests to dedicated forge-e2e project.
      Keep forge lean: only unit tests in src/*/tests/.
    scope:
      stay_in_forge:
        - "Unit tests: src/*/tests/*.rs (50 files, 22,620 LOC)"
        - "These test individual functions in isolation"
      migrate_to_forge_e2e:
        - "Integration tests: tests/*.rs (50 files)"
        - "Test data: tests/*.yaml (42 files)"
        - "Roundtrip tests: tests/roundtrip/ (9 files)"
        - "Edge case tests: formula_edge_cases_tests_*.rs"

    # Phase 1: Parallel Documentation & Planning (4 agents)
    phase_1_parallel_docs:
      - agent: "inventory"
        task: "Catalog forge/tests/, map to forge-e2e categories"
        output: "tests/MIGRATION_INVENTORY.md"
      - agent: "adr-forge"
        task: "Create ADR-027: E2E Test Migration Strategy"
        output: "docs/architecture/ADR-027-E2E-TEST-MIGRATION.md"
      - agent: "adr-forge-e2e"
        task: "Create ADRs in forge-e2e: testing philosophy, validation"
        output: "forge-e2e/docs/ADR-001-TESTING-PHILOSOPHY.md"
      - agent: "docs-forge-e2e"
        task: "Document forge-e2e structure, test framework, usage"
        output: "forge-e2e/README.md, docs/CONTRIBUTING.md"

    # Phase 2: Parallel Migration (4 agents)
    phase_2_parallel_migrate:
      - agent: "migrate-roundtrip"
        task: "Move tests/roundtrip/ → forge-e2e"
        files: "9 files (harness, aggregation, financial, etc.)"
      - agent: "migrate-edge"
        task: "Move edge case tests → forge-e2e/tests/e2e/edge/"
        files: "formula_edge_cases_tests_*.rs, edge_*.yaml"
      - agent: "migrate-e2e"
        task: "Move e2e_tests*.rs → forge-e2e"
        files: "e2e_tests.rs, e2e_tests_*.rs"
      - agent: "migrate-yaml"
        task: "Move test YAML data files"
        files: "42 yaml files"

    # Phase 3: Sequential Cleanup & Validation
    phase_3_cleanup:
      - "Remove migrated tests from forge/tests/"
      - "Update forge Cargo.toml (remove unused test deps)"
      - "Run forge unit tests (should still pass)"
      - "Run forge-e2e full suite"
      - "Verify test count: forge + forge-e2e >= 1643"

    adrs_to_create:
      forge:
        - "ADR-027: E2E Test Migration Strategy"
      forge_e2e:
        - "ADR-001: Testing Philosophy (unit vs e2e vs roundtrip)"
        - "ADR-002: Gnumeric Validation Approach"
        - "ADR-003: Edge Case Discovery Process"

    success_criteria:
      - "forge/tests/ contains only unit tests"
      - "All tests pass (split between forge and forge-e2e)"
      - "forge-e2e catches bugs that forge unit tests miss"
      - "ADRs document the split rationale"
      - "Context window manageable for Claude"

  - version: "10.0.0"
    priority: NORMAL
    status: pending
    summary: "Performance - SIMD Vectorization"
    deliverables:
      - "Identify hot paths in Monte Carlo, Bootstrap, matrix operations"
      - "Use packed_simd or std::simd for parallel arithmetic"
      - "Benchmark before/after with criterion"
      - "Target: 2-4x speedup on numeric-heavy workloads"

  - version: "10.1.0"
    priority: NORMAL
    status: pending
    summary: "Performance - Multi-threading with Rayon"
    deliverables:
      - "Parallelize Monte Carlo iterations across cores"
      - "Parallelize Bootstrap resampling"
      - "Parallelize independent table calculations"
      - "Target: Near-linear scaling with core count"

  - version: "10.2.0"
    priority: NORMAL
    status: pending
    summary: "Performance - GPU Acceleration (CUDA/OpenCL)"
    deliverables:
      - "Evaluate rust-cuda or ocl crate"
      - "Offload Monte Carlo to GPU"
      - "Offload matrix operations to GPU"
      - "Optional feature flag (--features gpu)"
      - "Target: 10-100x for large simulations"

  - version: "10.3.0"
    priority: NORMAL
    status: pending
    summary: "Performance - Algorithmic Optimizations"
    deliverables:
      - "Profile all functions with flamegraph"
      - "Identify O(n²) or worse algorithms"
      - "Optimize memory allocations (arena allocators)"
      - "Cache repeated calculations"
      - "Target: 2-10x from algorithmic improvements"

  - version: "7.3.0"
    priority: NORMAL
    status: pending
    summary: "INCLUDE Feature - Complete E2E Testing & Roundtrip Validation"
    deliverables:
      - "E2E test: YAML -> XLSX -> Gnumeric -> CSV roundtrip with includes"
      - "E2E test: 3+ level recursive includes (main->level1->level2->level3)"
      - "E2E test: @namespace.field formula evaluation"
      - "E2E test: Circular dependency detection"
      - "Documentation: INCLUDE feature limitations"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG - Future ideas (unscheduled)
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "Find external FOSS tool to validate Forge-native functions"
  - "Enterprise licensing (when ready to leave CGI)"
  - "MCP server documentation"
  - "Performance benchmarks per function"
  - "FPGA acceleration for HFT (post-capitalization) - see ADR-026"

# ═══════════════════════════════════════════════════════════════════════════════
# BUGS - No active issues
# ═══════════════════════════════════════════════════════════════════════════════

bugs: []

# BUG-001 through BUG-013 fixed
# BUG-010 to BUG-013 were already resolved by BUG-003 to BUG-009 fixes (Boolean literals, comparisons)
# See CHANGELOG.md for details

# ═══════════════════════════════════════════════════════════════════════════════
# SUMMARY
# ═══════════════════════════════════════════════════════════════════════════════

summary:
  total_functions: 173
  categories: 15
  tests: 1643
  history: "See CHANGELOG.md"
