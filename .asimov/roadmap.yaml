# Forge Roadmap
# Version: Cargo.toml | History: CHANGELOG.md | Config: project.yaml

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT
# ═══════════════════════════════════════════════════════════════════════════════

next:
  # ── v10.0.0-beta.3 ── rmcp Migration ─────────────────────────────────────
  #
  # Team: beta3-rmcp (2 agents)
  #   core-agent:  RMCP-001, RMCP-002, RMCP-003, RMCP-006
  #   docs-agent:  RMCP-004, RMCP-005
  #
  - id: RMCP-001
    title: "Rewrite server.rs with rmcp #[tool_router] + #[tool_handler]"
    agent: core
    description: >
      Replace 1,115 lines of hand-rolled JSON-RPC (get_tools, call_tool,
      handle_request, run_mcp_server_sync) with rmcp derive macros.
      20 tool methods, each calling *_core() functions. ~350 lines.

  - id: RMCP-002
    title: "Create src/mcp/types.rs — 20 typed request structs"
    agent: core
    description: >
      20 request structs with #[derive(Deserialize, JsonSchema)].
      Doc comments on fields become JSON schema descriptions automatically.
      Replaces 423 lines of manual json!({}) schema construction.

  - id: RMCP-003
    title: "Adapt MCP test module (671→~400 lines)"
    agent: core
    description: >
      Delete obsolete JSON-RPC protocol tests (rmcp's responsibility now).
      Adapt tool dispatch tests to direct method calls on ForgeMcpServer.
      Add new tests: tool count, get_info(), schema generation smoke.
    depends_on: [RMCP-001, RMCP-002]

  - id: RMCP-004
    title: "ADR-048 + docs/MCP.md update"
    agent: docs
    description: >
      Write ADR-048-RMCP-MIGRATION.md documenting the migration rationale.
      Update docs/MCP.md to mention rmcp, note future transport options.

  - id: RMCP-005
    title: "Roadmap + CHANGELOG + version bump to beta.3"
    agent: docs
    description: >
      Move RMCP items to completed, promote MCP-003 to next (beta.4).
      Add beta.3 section to CHANGELOG. Bump Cargo.toml version.

  - id: RMCP-006
    title: "CI smoke test verification/update"
    agent: core
    description: >
      Verify existing CI MCP smoke test works with rmcp wire format.
      If rmcp uses Content-Length framing instead of newline-delimited JSON,
      adapt the CI test parsing accordingly.
    depends_on: [RMCP-001, RMCP-002, RMCP-003]

# ── v10.0.0-beta.4 ── Transport Abstraction ────────────────────────────────

upcoming:
  - id: MCP-003
    title: "Add transport abstraction (stdio + SSE/WebSocket support)"
    description: >
      Use rmcp's transport layer to support stdio (current), SSE, and
      WebSocket transports. Enables browser-based and remote MCP clients.
      ~50 lines once rmcp is in place. Requires design decisions on
      ports, auth, TLS, CLI flags (forge mcp --transport sse --port 8081).
    depends_on: "beta.3 complete"

# ═══════════════════════════════════════════════════════════════════════════════
# COMPLETED
# ═══════════════════════════════════════════════════════════════════════════════

completed:
  # ── v10.0.0-beta.2 ── Documentation & CI/CD ────────────────────────────
  - id: DOC-001
    title: "Update README MCP section (10→20 tools)"
  - id: DOC-002
    title: "MCP integration guide (docs/MCP.md)"
  - id: DOC-003
    title: "Auto-generated function reference (docs/FUNCTIONS.md)"
  - id: CI-001
    title: "MCP protocol smoke test in CI"
  - id: CI-002
    title: "Coverage enforcement in CI"
  - id: CI-003
    title: "Dynamic badge infrastructure"
  - id: CI-004
    title: "Auto-generate FUNCTIONS.md in CI"
  - id: DOC-004
    title: "Update README badges to dynamic"
  - id: META-001
    title: "Roadmap + CHANGELOG + version bump"

  # ── v10.0.0-beta.1 ── MCP Overhaul ──────────────────────────────────────
  - id: BETA-001
    title: "MCP stdout pollution — fix protocol-breaking bug"
  - id: BETA-002
    title: "MCP tools — add 7 missing Forge-native analysis engines"
  - id: BETA-003
    title: "MCP discovery tools — self-documenting server"
  - id: BETA-004
    title: "MCP rich schemas — YAML format examples in tool descriptions"
  - id: BETA-005
    title: "Unit tests for all new MCP tools"
  - id: BETA-006
    title: "ADR + CHANGELOG + --help updates"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG - Future ideas (unscheduled)
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "Homebrew formula / cargo-binstall distribution"
  - "100% Coverage Enforcement (ADR-004/ADR-006 compliance)"
  - "API Feature Parity + OpenAPI (17 REST endpoints matching 17 MCP tools)"
  - "CLI Improvements: rename upgrade → migrate, restore update command"
  - "Game Theory Module - Nash equilibrium, IPD tournaments, Folk theorem, ESS"
  - "Performance - SIMD Vectorization (2-4x speedup on numeric-heavy workloads)"
  - "Performance - Multi-threading with Rayon (near-linear scaling with core count)"
  - "Performance - GPU Acceleration CUDA/OpenCL (10-100x for large simulations)"
  - "Performance - Algorithmic Optimizations (flamegraph profiling, arena allocators)"
  - "Crystal Analysis - N-Dimensional Fractal Visualization for DANEEL (ADR-028)"
  - "Port edge cases from forge-e2e to inline Rust unit tests"
  - "INCLUDE Feature - Complete E2E Testing & Roundtrip Validation"
  - "Find external FOSS tool to validate Forge-native functions"
  - "Performance benchmarks per function"
  - "FPGA acceleration for HFT (post-capitalization) - see ADR-026"
