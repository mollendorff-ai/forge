#!/bin/bash
#
# Forge pre-commit hook - mirrors CI checks
# Must be as strict as .github/workflows/ci.yml
# Auto-installed by cargo-husky on `cargo test`

set -e

echo "ðŸ” Running pre-commit checks..."

echo "ðŸ“ Checking formatting..."
cargo fmt --all -- --check

echo "ðŸ“Ž Running clippy (strict)..."
cargo clippy --all-targets --all-features -- -D warnings

echo "ðŸ§ª Running tests..."
cargo test --all-features

# MÃ¶llendorff AI Asimov checks (if installed and commands available)
if command -v asimov &> /dev/null; then
    asimov validate 2>/dev/null || true
fi

echo "âœ… Pre-commit checks passed!"
