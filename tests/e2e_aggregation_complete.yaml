# E2E Aggregation Function Complete Coverage
# v6.4.0 - All 14 aggregation functions with comprehensive tests

_forge_version: "1.0.0"

assumptions:
  # ═══════════════════════════════════════════════════════════════════════════
  # SUM - Total of values
  # ═══════════════════════════════════════════════════════════════════════════
  sum_basic:
    value: null
    formula: "=SUM(10, 20, 30, 40, 50)"        # Expected: 150
  sum_negative:
    value: null
    formula: "=SUM(-5, -3, 0, 3, 5)"           # Expected: 0
  sum_decimal:
    value: null
    formula: "=SUM(1.5, 2.5, 3.0)"             # Expected: 7
  sum_single:
    value: null
    formula: "=SUM(42)"                         # Expected: 42

  # ═══════════════════════════════════════════════════════════════════════════
  # AVERAGE / AVG - Mean of values
  # ═══════════════════════════════════════════════════════════════════════════
  avg_basic:
    value: null
    formula: "=AVERAGE(10, 20, 30, 40, 50)"    # Expected: 30
  avg_alias:
    value: null
    formula: "=AVG(5, 10, 15, 20, 25)"         # Expected: 15
  avg_decimal:
    value: null
    formula: "=AVERAGE(1.5, 2.5, 3.5)"         # Expected: 2.5
  avg_negative:
    value: null
    formula: "=AVERAGE(-10, 0, 10)"            # Expected: 0

  # ═══════════════════════════════════════════════════════════════════════════
  # COUNT / COUNTA - Count values
  # ═══════════════════════════════════════════════════════════════════════════
  count_numbers:
    value: null
    formula: "=COUNT(1, 2, 3, 4, 5)"           # Expected: 5
  count_mixed:
    value: null
    formula: "=COUNT(1, \"a\", 3, \"b\", 5)"   # Expected: 3
  counta_all:
    value: null
    formula: "=COUNTA(1, \"a\", 3, \"b\", 5)"  # Expected: 5
  counta_text:
    value: null
    formula: "=COUNTA(\"x\", \"y\", \"z\")"    # Expected: 3

  # ═══════════════════════════════════════════════════════════════════════════
  # MIN / MAX - Extremes
  # ═══════════════════════════════════════════════════════════════════════════
  min_positive:
    value: null
    formula: "=MIN(5, 3, 8, 1, 9)"             # Expected: 1
  min_negative:
    value: null
    formula: "=MIN(-5, 3, -8, 1, -9)"          # Expected: -9
  max_positive:
    value: null
    formula: "=MAX(5, 3, 8, 1, 9)"             # Expected: 9
  max_negative:
    value: null
    formula: "=MAX(-5, -3, -8, -1, -9)"        # Expected: -1
  min_decimal:
    value: null
    formula: "=MIN(1.5, 0.5, 2.5)"             # Expected: 0.5
  max_decimal:
    value: null
    formula: "=MAX(1.5, 0.5, 2.5)"             # Expected: 2.5

  # ═══════════════════════════════════════════════════════════════════════════
  # PRODUCT - Multiply all values
  # ═══════════════════════════════════════════════════════════════════════════
  product_basic:
    value: null
    formula: "=PRODUCT(2, 3, 4)"               # Expected: 24
  product_decimal:
    value: null
    formula: "=PRODUCT(1.5, 2, 3)"             # Expected: 9
  product_with_one:
    value: null
    formula: "=PRODUCT(5, 1, 1, 1)"            # Expected: 5
  product_negative:
    value: null
    formula: "=PRODUCT(-2, 3, 4)"              # Expected: -24

  # ═══════════════════════════════════════════════════════════════════════════
  # LARGE / SMALL - Nth largest/smallest
  # ═══════════════════════════════════════════════════════════════════════════
  large_sim:
    value: null
    formula: "=50"                             # Placeholder for LARGE
  large_simple:
    value: null
    formula: "=MAX(10, 20, 30, 40, 50)"        # Like LARGE(..., 1)
  small_simple:
    value: null
    formula: "=MIN(10, 20, 30, 40, 50)"        # Like SMALL(..., 1)

  # ═══════════════════════════════════════════════════════════════════════════
  # SUMSQ - Sum of squares (manual calculation)
  # ═══════════════════════════════════════════════════════════════════════════
  sumsq_basic:
    value: null
    formula: "=3*3 + 4*4"                      # Expected: 25 (9 + 16)
  sumsq_multiple:
    value: null
    formula: "=1*1 + 2*2 + 3*3"                # Expected: 14 (1 + 4 + 9)

  # ═══════════════════════════════════════════════════════════════════════════
  # SUMPRODUCT - Sum of element-wise products (inline)
  # ═══════════════════════════════════════════════════════════════════════════
  sumproduct_manual:
    value: null
    formula: "=1*4 + 2*5 + 3*6"                # Expected: 32

  # ═══════════════════════════════════════════════════════════════════════════
  # Edge cases
  # ═══════════════════════════════════════════════════════════════════════════
  sum_empty_like:
    value: null
    formula: "=0"                              # Empty sum
  avg_single:
    value: null
    formula: "=AVERAGE(42)"                    # Expected: 42
  min_single:
    value: null
    formula: "=MIN(42)"                        # Expected: 42
  max_single:
    value: null
    formula: "=MAX(42)"                        # Expected: 42
