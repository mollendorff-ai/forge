# E2E Logical Function Validation (Demo Functions Only)
# Validated against Gnumeric and LibreOffice Calc

_forge_version: "1.0.0"

assumptions:
  # Test values
  val_positive:
    value: 100
    formula: null
  val_negative:
    value: -50
    formula: null
  val_zero:
    value: 0
    formula: null

  # IF
  test_if_true:
    value: null
    formula: "=IF(val_positive > 0, 1, 0)"     # Expected: 1
  test_if_false:
    value: null
    formula: "=IF(val_negative > 0, 1, 0)"    # Expected: 0
  test_if_nested:
    value: null
    formula: "=IF(val_positive > 50, IF(val_positive > 75, 3, 2), 1)"  # Expected: 3

  # AND
  test_and_true:
    value: null
    formula: "=IF(AND(val_positive > 0, val_negative < 0), 1, 0)"   # Expected: 1
  test_and_false:
    value: null
    formula: "=IF(AND(val_positive > 0, val_negative > 0), 1, 0)"  # Expected: 0

  # OR
  test_or_true:
    value: null
    formula: "=IF(OR(val_positive > 0, val_negative > 0), 1, 0)"   # Expected: 1
  test_or_false:
    value: null
    formula: "=IF(OR(val_positive < 0, val_negative > 0), 1, 0)"  # Expected: 0

  # NOT
  test_not_true:
    value: null
    formula: "=IF(NOT(val_negative > 0), 1, 0)"   # Expected: 1
  test_not_false:
    value: null
    formula: "=IF(NOT(val_positive > 0), 1, 0)"  # Expected: 0

  # IFERROR
  test_iferror_ok:
    value: null
    formula: "=IFERROR(val_positive / 2, -1)"    # Expected: 50
  test_iferror_err:
    value: null
    formula: "=IFERROR(val_positive / val_zero, -1)"  # Expected: -1
